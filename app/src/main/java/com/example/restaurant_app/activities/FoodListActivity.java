package com.example.restaurant_app.activities;import android.app.Activity;import android.content.Context;import android.content.Intent;import android.os.Bundle;import android.view.View;import android.widget.Button;import android.widget.ListView;import android.widget.Toast;import com.example.restaurant_app.adapters.FoodListAdapter;import com.example.restaurant_app.adapters.SharedPreferencesAdapter;import com.example.restaurant_app.firestore.FoodFirestoreManager;import com.example.restaurant_app.models.Food;import com.example.restaurant_app.models.User;import com.google.gson.Gson;import java.util.List;/** * * @author Simon Rothmann * @content activity for food-list */public class FoodListActivity extends Activity {    private FoodFirestoreManager foodManager;    /**     *     * @param savedInstanceState state, for passing data to detail     */    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.food_list);        foodManager = FoodFirestoreManager.newInstance();        Gson gson = new Gson();        Context context = getBaseContext();        final User curUser = gson.fromJson(SharedPreferencesAdapter.getDefaults("currentUser",context), User.class);        foodManager.getFoodsByRestaurantId(curUser.getRestaurant().getRestaurantId(), new FoodFirestoreManager.GetFoodsByRestaurantCallback() {            @Override            public void onCallback(List<Food> foods) {                if (foods.size() > 0) {                    ListView foodsListView = findViewById(R.id.foodList);                    FoodListAdapter foodAdapter = new FoodListAdapter(FoodListActivity.this, foods);                    foodsListView.setAdapter(foodAdapter);                } else {                    Toast toast = Toast.makeText(getApplicationContext(), getResources().getString(R.string.toast_error_no_data), Toast.LENGTH_LONG);                    toast.show();                }            }            @Override            public void onFailureCallback(Exception e) {                Toast toast = Toast.makeText(getApplicationContext(), getResources().getString(R.string.toast_error), Toast.LENGTH_LONG);                toast.show();            }        });        final Button newFoodButton = findViewById(R.id.newFoodButton);        newFoodButton.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                        Intent intent = new Intent(view.getContext(), FoodDetailActivity.class);                        intent.putExtra("foodID", "0");                        view.getContext().startActivity(intent);                }        });        final Button goToOverviewButton = findViewById(R.id.goToOverviewButton);        goToOverviewButton.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                Intent intent = new Intent(view.getContext(), OverviewActivity.class);                view.getContext().startActivity(intent);            }        });    }}